<BlackBackground@Widget>
    background_color: 1, 1, 1, 1
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            size: self.size
            pos: self.pos

<BlackLabel@Label+BlackBackground>
    background_color: 0, 0, 0, 0

<EmptyLabel@Label+BlackBackground>
    background_color: 0, 0, 0, 0

<MyLayout>
    size_hint: .9, .9
    pos_hint: {'center_x': .5 , 'center_y': .5}
    do_default_tab: False

    TabbedPanelItem:
        text: 'main tab'

        BoxLayout:
            orientation: "vertical"
            size_hint: 1, 1

            EmptyLabel:
                id: between_title_key_label
                text: ""
                text_size: root.width, None
                size: self.texture_size
                font_size: 64

            Label:
                id: key_label
                text: "Key"
                font_size: 32
                size: self.texture_size

            Spinner:
                id: spinner_key_id
                text: "Choose Key"
                values: ["Random", "C", "C#", "Db", "D", "D#", "Eb", "E", "F", "F#", "Gb", "G", "G#", "Ab", "A", "A#", "Bb", "B"]
                on_text: root.update_label("spinner_key_id", spinner_key_id.text)
                font_size: 32

            Label:
                id: scale_label
                text: "Scale"
                font_size: 32

            Spinner:
                id: spinner_scale_id
                text: "Choose Scale"
                values: ["Random", "Major", "Minor", "Harmonic Minor", "Melodic Minor", "Pentatonic", "Whole Tone", "Chromatic", "Blues"]
                on_text: root.update_label("spinner_scale_id", spinner_scale_id.text)
                font_size: 32

            Label:
                id: octave_label
                text: "Octave"
                font_size: 32

            Spinner:
                id: spinner_octave_id
                text: "Choose Octave"
                values: ["Random", "0", "1", "2", "3", "4", "5", "6", "7"]
                on_text: root.update_label("spinner_octave_id", spinner_octave_id.text)
                font_size: 32

            Label:
                id: bars_label
                text: "Number of Bars"
                font_size: 32

            TextInput:
                id: input_bars_id
                multiline:False
                on_text: root.update_label("input_bars_id", input_bars_id.text)
                font_size: 32

            Label:
                id: instrument_label
                text: "Instrument Selection"
                font_size: 32

            Spinner:
                id: spinner_instrument_id
                text: "Choose Instrument"
                values: ['Random', 'Acoustic Grand Piano', 'Bright Acoustic Piano', 'Electric Grand Piano', 'Honky-tonk Piano', 'Electric Piano 1', 'Electric Piano 2', 'Harpsichord', 'Clavi', 'Celesta', 'Glockenspiel', 'Music Box', 'Vibraphone', 'Marimba', 'Xylophone', 'Tubular Bells', 'Dulcimer', 'Drawbar Organ', 'Percussive Organ', 'Rock Organ', 'Church Organ', 'Reed Organ', 'Accordion', 'Harmonica', 'Tango Accordion', 'Acoustic Guitar (nylon)', 'Acoustic Guitar (steel)', 'Electric Guitar (jazz)', 'Electric Guitar (clean)', 'Electric Guitar (muted)', 'Overdriven Guitar', 'Distortion Guitar', 'Guitar Harmonics', 'Acoustic Bass', 'Electric Bass (finger)', 'Electric Bass (pick)', 'Fretless Bass', 'Slap Bass 1', 'Slap Bass 2', 'Synth Bass 1', 'Synth Bass 2', 'Violin', 'Viola', 'Cello', 'Contrabass', 'Tremolo Strings', 'Pizzicato Strings', 'Orchestral Harp', 'Timpani', 'String Ensemble 1', 'String Ensemble 2', 'Synth Strings 1', 'Synth Strings 2', 'Choir Aahs', 'Voice Oohs', 'Synth Voice', 'Orchestra Hit', 'Trumpet', 'Trombone', 'Tuba', 'Muted Trumpet', 'French Horn', 'Brass Section', 'Synth Brass 1', 'Synth Brass 2', 'Soprano Sax', 'Alto Sax', 'Tenor Sax', 'Baritone Sax', 'Oboe', 'English Horn', 'Bassoon', 'Clarinet', 'Piccolo', 'Flute', 'Recorder', 'Pan Flute', 'Blown Bottle', 'Shakuhachi', 'Whistle', 'Ocarina', 'Lead 1 (square)', 'Lead 2 (sawtooth)', 'Lead 3 (calliope)', 'Lead 4 (chiff)', 'Lead 5 (charang)', 'Lead 6 (voice)', 'Lead 7 (fifths)', 'Lead 8 (bass + lead)', 'Pad 1 (new age)', 'Pad 2 (warm)', 'Pad 3 (polysynth)', 'Pad 4 (choir)', 'Pad 5 (bowed)', 'Pad 6 (metallic)', 'Pad 7 (halo)', 'Pad 8 (sweep)', 'Sitar', 'Banjo', 'Shamisen', 'Koto', 'Kalimba', 'Bag pipe', 'Fiddle', 'Shanai', 'FX 1 (rain)', 'FX 2 (soundtrack)', 'FX 3 (crystal)', 'FX 4 (atmosphere)', 'FX 5 (brightness)', 'FX 6 (goblins)', 'FX 7 (echoes)', 'FX 8 (sci-fi)']
                on_text: root.update_label("spinner_instrument_id", spinner_instrument_id.text)
                font_size: 32

            Label:
                id: between_instrument_generate_label
                text: ""
                font_size: 8

            Button:
                text: 'Generate Melodies'
                on_press: root.main(spinner_key_id.text, spinner_scale_id.text, spinner_octave_id.text, input_bars_id.text, spinner_instrument_id.text)
                on_release: print("MIDI file written to out.mid!")
                font_size: 32
            Button:
                text: 'Replay Melody'
                on_release: root.replay_melody()
                font_size: 32
            Button:
                text: 'Save Melody'
                on_press: root.save_melody()
                on_release: print("Melody saved!")
                font_size: 32

            Button:
                text: 'Add Last Generated to Stack'
                on_press: root.addMelToStack()
                on_release: print("added to stack")
                font_size: 32

            #Label:
                #text: ""
                #font_size: 8

            Label:
                id: generation_label
                text: "Generation: Press 'Generate Melodies' to create the first Generation!"
                font_size: 32

            #Label:
                #text: ""
                #font_size: 8

            Label:
                id: ratings_label
                text: "Ratings"
                font_size: 32

            BoxLayout:
                orientation: "horizontal"

                Button:
                    id: rating_1_id
                    text: '1'
                    on_press: root.giveRating("1")
                    on_release: print("MIDI file written to out.mid!")

                Button:
                    text: '2'
                    on_press: root.giveRating("2")
                    on_release: print("MIDI file written to out.mid!")

                Button:
                    text: '3'
                    on_press: root.giveRating("3")
                    on_release: print("MIDI file written to out.mid!")

                Button:
                    text: '4'
                    on_press: root.giveRating("4")
                    on_release: print("MIDI file written to out.mid!")

                Button:
                    text: '5'
                    on_press: root.giveRating("5")
                    on_release: print("MIDI file written to out.mid!")

                Button:
                    text: '6'
                    on_press: root.giveRating("6")
                    on_release: print("MIDI file written to out.mid!")

                Button:
                    text: '7'
                    on_press: root.giveRating("7")
                    on_release: print("MIDI file written to out.mid!")

                Button:
                    text: '8'
                    on_press: root.giveRating("8")
                    on_release: print("MIDI file written to out.mid!")

                Button:
                    text: '9'
                    on_press: root.giveRating("9")
                    on_release: print("MIDI file written to out.mid!")

                Button:
                    text: '10'
                    on_press: root.giveRating("10")
                    on_release: print("MIDI file written to out.mid!")

    TabbedPanelItem:
        text: 'melody stack'
        FloatLayout:
            orientation: "vertical"
            size: root.width - 200, root.height - 200
            Label:
                id: spot1
                font_size: 22
            Button:
                id: but1
                text: "play"
                font_size: 16
                size_hint: .1, .05
                pos_hint: {'center_x':.823, 'center_y':.95}
                background_color: 1.0, 0.0, 0.0, 1.0
                on_press: root.playIndMel(1)
            Button:
                id: but1Del
                text: "delete"
                font_size: 16
                size_hint: .1, .05
                pos_hint: {'center_x':.94, 'center_y':.95}
                on_press: root.delIndMel(1)
                Image:
                    id: spot1text
                    source: 'images/spot1.png'
                    width: 200
                    height: 200
                    center_x: self.parent.center_x - (root.width/2)
                    center_y: self.parent.center_y
            FloatLayout:
                orientation: "vertical"
                Label:
                    id: spot2
                    font_size: 22
                Button:
                    id: but2
                    text: "play"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.88, 'center_y':.923}
                    background_color: 1.0, 0.0, 0.0, 1.0
                    on_press: root.playIndMel(2)
                Button:
                    id: but2Del
                    text: "delete"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.995, 'center_y':.923}
                    on_press: root.delIndMel(2)
                    Image:
                        id: spot1text
                        source: 'images/spot2.png'
                        width: 205
                        height: 200
                        center_x: self.parent.center_x - (root.width/2)
                        center_y: self.parent.center_y
            FloatLayout:
                orientation: "vertical"
                Label:
                    id: spot3
                    font_size: 22
                Button:
                    id: but3
                    text: "play"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.88, 'center_y':.835}
                    background_color: 1.0, 0.0, 0.0, 1.0
                    on_press: root.playIndMel(3)
                Button:
                    id: but3Del
                    text: "delete"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.995, 'center_y':.835}
                    on_press: root.delIndMel(3)
                    Image:
                        id: spot1text
                        source: 'images/spot3.png'
                        width: 205
                        height: 200
                        center_x: self.parent.center_x - (root.width/2)
                        center_y: self.parent.center_y
            FloatLayout:
                orientation: "vertical"
                Label:
                    id: spot4
                    font_size: 22
                Button:
                    id: but4
                    text: "play"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.88, 'center_y':.747}
                    background_color: 1.0, 0.0, 0.0, 1.0
                    on_press: root.playIndMel(4)
                Button:
                    id: but4Del
                    text: "delete"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.995, 'center_y':.747}
                    on_press: root.delIndMel(4)
                    Image:
                        id: spot1text
                        source: 'images/spot4.png'
                        width: 205
                        height: 200
                        center_x: self.parent.center_x - (root.width/2)
                        center_y: self.parent.center_y
            FloatLayout:
                orientation: "vertical"
                Label:
                    id: spot5
                    font_size: 22
                Button:
                    id: but5
                    text: "play"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.88, 'center_y':.659}
                    background_color: 1.0, 0.0, 0.0, 1.0
                    on_press: root.playIndMel(5)
                Button:
                    id: but5Del
                    text: "delete"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.995, 'center_y':.659}
                    on_press: root.delIndMel(5)
                    Image:
                        id: spot1text
                        source: 'images/spot5.png'
                        width: 205
                        height: 200
                        center_x: self.parent.center_x - (root.width/2)
                        center_y: self.parent.center_y
            FloatLayout:
                orientation: "vertical"
                Label:
                    id: spot6
                    font_size: 22
                Button:
                    id: but6
                    text: "play"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.88, 'center_y':.571}
                    background_color: 1.0, 0.0, 0.0, 1.0
                    on_press: root.playIndMel(6)
                Button:
                    id: but6Del
                    text: "delete"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.995, 'center_y':.571}
                    on_press: root.delIndMel(6)
                    Image:
                        id: spot1text
                        source: 'images/spot6.png'
                        width: 205
                        height: 200
                        center_x: self.parent.center_x - (root.width/2)
                        center_y: self.parent.center_y
            FloatLayout:
                orientation: "vertical"
                Label:
                    id: spot7
                    font_size: 22
                Button:
                    id: but7
                    text: "play"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.88, 'center_y':.483}
                    background_color: 1.0, 0.0, 0.0, 1.0
                    on_press: root.playIndMel(7)
                Button:
                    id: but7Del
                    text: "delete"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.995, 'center_y':.483}
                    on_press: root.delIndMel(7)
                    Image:
                        id: spot1text
                        source: 'images/spot7.png'
                        width: 205
                        height: 200
                        center_x: self.parent.center_x - (root.width/2)
                        center_y: self.parent.center_y
            FloatLayout:
                orientation: "vertical"
                Label:
                    id: spot8
                    font_size: 22
                Button:
                    id: but8
                    text: "play"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.88, 'center_y':.395}
                    background_color: 1.0, 0.0, 0.0, 1.0
                    on_press: root.playIndMel(8)
                Button:
                    id: but8Del
                    text: "delete"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.995, 'center_y':.395}
                    on_press: root.delIndMel(8)
                    Image:
                        id: spot1text
                        source: 'images/spot8.png'
                        width: 205
                        height: 200
                        center_x: self.parent.center_x - (root.width/2)
                        center_y: self.parent.center_y
            FloatLayout:
                orientation: "vertical"
                Label:
                    id: spot9
                    font_size: 22
                Button:
                    id: but9
                    text: "play"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.88, 'center_y':.307}
                    background_color: 1.0, 0.0, 0.0, 1.0
                    on_press: root.playIndMel(9)
                Button:
                    id: but9Del
                    text: "delete"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.995, 'center_y':.307}
                    on_press: root.delIndMel(9)
                    Image:
                        id: spot1text
                        source: 'images/spot9.png'
                        width: 205
                        height: 200
                        center_x: self.parent.center_x - (root.width/2)
                        center_y: self.parent.center_y
            FloatLayout:
                orientation: "vertical"
                Label:
                    id: spot10
                    font_size: 22
                Button:
                    id: but10
                    text: "play"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.88, 'center_y':.219}
                    background_color: 1.0, 0.0, 0.0, 1.0
                    on_press: root.playIndMel(10)
                Button:
                    id: but10Del
                    text: "delete"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.995, 'center_y':.219}
                    on_press: root.delIndMel(10)
                    Image:
                        id: spot1text
                        source: 'images/spot10.png'
                        width: 205
                        height: 200
                        center_x: self.parent.center_x - (root.width/2)
                        center_y: self.parent.center_y
            FloatLayout:
                orientation: "vertical"
                Label:
                    id: fullStack
                    font_size: 22
                Button:
                    id: fullStackBut
                    text: "play"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.88, 'center_y':.131}
                    background_color: 1.0, 0.0, 0.0, 1.0
                    on_press: root.playMelStack()
                Button:
                    id: fullStackButDel
                    text: "delete"
                    font_size: 16
                    size_hint: .1, .05
                    pos_hint: {'center_x':.995, 'center_y':.131}
                    on_press: root.clearStack()
                    on_release: print("stack cleared")
                    Image:
                        id: spot1text
                        source: 'images/fullstack.png'
                        width: 205
                        height: 200
                        center_x: self.parent.center_x - (root.width/2)
                        center_y: self.parent.center_y